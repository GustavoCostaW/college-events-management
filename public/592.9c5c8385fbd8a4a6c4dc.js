(self.webpackChunkcollege_events_management=self.webpackChunkcollege_events_management||[]).push([[592],{4912:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var r=s(9764),n=s(611),i=s(9996),a=s(5366),o=s(8115);let c=(()=>{class e{constructor(e){this.afs=e}returnSemesterId(e){return`${e.date.getMonth()+1<=6?1:2}${e.date.getFullYear()}`}findSemester(e,t){return this.afs.collection("semesters",s=>s.where("year","==",t).where("semester","==",e)).valueChanges({idField:"id"}).pipe((0,n.q)(1))}createSemester(e){return(0,r.D)(this.afs.collection("semesters").add(e)).pipe((0,i.U)(e=>e.id))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(o.ST))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),d=(()=>{class e{constructor(e,t){this.afs=e,this.semesterService=t,this.path=(e,t)=>`courses/${e}/events/${t||""}`}getAllEventsByCourse(e){return console.log("hello!",this.path(e)),this.afs.collection(this.path(e),e=>e.orderBy("date","desc")).valueChanges({idField:"id"}).pipe((0,n.q)(1))}getAllEventsBySemesterAndCourse(e,t){return console.log("hello!",this.path(e)),this.afs.collection(this.path(e),e=>e.orderBy("date","desc").where("semester_id","==",t)).valueChanges({idField:"id"}).pipe((0,n.q)(1))}deleteEvent(e,t){return(0,r.D)(this.afs.doc(this.path(t,e)).delete()).pipe((0,i.U)(()=>!0))}updateEvent(e,t){return(0,r.D)(this.afs.doc(`courses/${t}/events/${e.id}`).update(Object.assign(Object.assign({},e),{semester_id:this.semesterService.returnSemesterId(e)}))).pipe((0,i.U)(()=>!0))}insertEvent(e,t,s){return(0,r.D)(this.afs.collection(this.path(t)).add(Object.assign(Object.assign({},e),{semester_id:this.semesterService.returnSemesterId(e),user_creator_id:s})))}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(o.ST),a.LFG(c))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);